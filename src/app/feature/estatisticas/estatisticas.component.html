<app-header [subtitulo]="tituloPagina"></app-header>
<app-utils-bar></app-utils-bar>
<section class="sec-error" *ngIf="!devMode">
  <h3 class="titulo-erro">Página ainda esta em desenvolvimento</h3>
  <p>A página que você está procurando ainda esta sendo densenvolvida.</p>
  <p>Por favor, verifique esta página novamente mais tarde.</p>
</section>
<!-- ngif utilizado para esconder na versao de build  -->
<!-- charts js nao vai aparecer quando tag esta utilizando ngif pois a div de render nao eh criada  -->
<section *ngIf="devMode" class="secao-atendimentos">
  <section class="input-container">

    <mat-form-field>
      <mat-label>Escolha um Intervalo</mat-label>
      <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
        <input matStartDate formControlName="start" placeholder="Data Inicial">
        <input matEndDate formControlName="end" placeholder="Data Final">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>


    </mat-form-field>
    <button mat-flat-button color="primary" style="padding: 2.1%;">Gerar Relatório</button>
    <button mat-flat-button color="primary" style="padding: 2.1%;" (click)="downloadPdf()">Imprimir Relatório</button>


  </section>


  <section class="c-options">
    <mat-chip-listbox aria-label="Escolher a sessão a ser apresentada">
      <mat-chip-option (click)="changeSection('assistidos')" selected>Assistidos</mat-chip-option>
      <mat-chip-option (click)="changeSection('atendimentos')">Atendimentos</mat-chip-option>
      <mat-chip-option (click)="changeSection('processos')">Processos</mat-chip-option>
    </mat-chip-listbox>
  </section>
  <div [ngClass]="{display:controlSection==='assistidos','no-display':controlSection!=='assistidos'}"
    class="mat-elevation-z8 main-container">

    <div class="c-table">

      container
    </div>
    <div class="chart-container c-chart">
      <canvas id="MyChart">{{ chart }}</canvas>
    </div>
  </div>
  <div [ngClass]="{display:controlSection==='processos','no-display':controlSection!=='processos'}"
    class="mat-elevation-z8 main-container">

    <div class="c-table">

      <table mat-table [dataSource]="listaProcesso">
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> Numéro </th>
          <td mat-cell *matCellDef="let processo"><a [routerLink]="'/processos/edit/' + processo.numero">
              {{processo.numero}} </a></td>
        </ng-container>

        <ng-container matColumnDef="data">
          <th mat-header-cell *matHeaderCellDef> Data </th>
          <td mat-cell *matCellDef="let processo"> {{ processo.dataDistribuicao | date:'dd/MM/yyyy'}} </td>
        </ng-container>

        <ng-container matColumnDef="vara">
          <th mat-header-cell *matHeaderCellDef> Vara </th>
          <td mat-cell *matCellDef="let processo"> {{ processo.vara}} </td>
        </ng-container>

        <ng-container matColumnDef="forum">
          <th mat-header-cell *matHeaderCellDef> Fórum </th>
          <td mat-cell *matCellDef="let processo"> {{processo.forum}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="colunasMostradas"></tr>
        <tr mat-row *matRowDef="let row; columns: colunasMostradas;"></tr>
      </table>
    </div>
    <div class="chart-container c-chart">
      <canvas id="chartProcesso">{{ chartProcesso }}</canvas>
    </div>
  </div>
  <div [ngClass]="{display:controlSection==='atendimentos','no-display':controlSection!=='atendimentos'}"
    class="mat-elevation-z8 main-container">

    <div class="c-table">
      total de Atendimentos {{listaProcesso.length}}
      Atendimentos
    </div>
    <div class="chart-container c-chart">
      <canvas id="chartAtendimento">{{ chartAtendimento }}</canvas>
    </div>
  </div>


</section>
